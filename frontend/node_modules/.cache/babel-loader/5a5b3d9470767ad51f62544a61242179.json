{"ast":null,"code":"import { useContext, useRef, useLayoutEffect } from 'react';\nimport { useThree } from '@react-three/fiber';\nimport { useVisualElementContext, calcLength } from 'framer-motion';\nimport { MotionCanvasContext } from './MotionCanvasContext.mjs';\nimport { invariant } from 'hey-listen';\nimport { clamp } from 'popmotion';\n\nvar calcBoxSize = function (_a) {\n  var x = _a.x,\n      y = _a.y;\n  return {\n    width: calcLength(x),\n    height: calcLength(y)\n  };\n};\n\nfunction useLayoutCamera(_a, updateCamera) {\n  var _b = _a.makeDefault,\n      makeDefault = _b === void 0 ? true : _b;\n  var context = useContext(MotionCanvasContext);\n  invariant(Boolean(context), \"No MotionCanvas detected. Replace Canvas from @react-three/fiber with MotionCanvas from framer-motion.\");\n  var _c = context,\n      dimensions = _c.dimensions,\n      layoutCamera = _c.layoutCamera,\n      requestedDpr = _c.requestedDpr;\n  var advance = useThree(function (three) {\n    return three.advance;\n  });\n  var set = useThree(function (three) {\n    return three.set;\n  });\n  var camera = useThree(function (three) {\n    return three.camera;\n  });\n  var size = useThree(function (three) {\n    return three.size;\n  });\n  var gl = useThree(function (three) {\n    return three.gl;\n  });\n  var parentVisualElement = useVisualElementContext();\n  var measuredLayoutSize = useRef();\n  useLayoutEffect(function () {\n    measuredLayoutSize.current = size;\n    updateCamera(size);\n    advance(performance.now());\n    var projection = parentVisualElement === null || parentVisualElement === void 0 ? void 0 : parentVisualElement.projection;\n    if (!projection) return;\n    /**\n     * When the projection of an element changes we want to update the camera\n     * with the projected dimensions.\n     */\n\n    var removeProjectionUpdateListener = projection.addEventListener(\"projectionUpdate\", function (newProjection) {\n      return updateCamera(calcBoxSize(newProjection));\n    });\n    /**\n     * When the layout of an element changes we want to update the renderer\n     * output to match the layout dimensions.\n     */\n\n    var removeLayoutMeasureListener = projection.addEventListener(\"measure\", function (newLayout) {\n      var newSize = calcBoxSize(newLayout);\n      var dpr = requestedDpr;\n      var _a = dimensions.current.size,\n          width = _a.width,\n          height = _a.height;\n      var xScale = width / newSize.width;\n      var yScale = height / newSize.height;\n      var maxScale = Math.max(xScale, yScale);\n      dpr = clamp(0.75, 4, maxScale);\n      dimensions.current = {\n        size: {\n          width: newSize.width,\n          height: newSize.height\n        },\n        dpr: dpr\n      };\n      gl.setSize(newSize.width, newSize.height);\n      gl.setPixelRatio(dpr);\n    });\n    /**\n     * When a projection animation completes we want to update the camera to\n     * match the recorded layout of the element.\n     */\n\n    var removeAnimationCompleteListener = projection.addEventListener(\"animationComplete\", function () {\n      var actual = (projection.layout || {}).actual;\n\n      if (actual) {\n        setTimeout(function () {\n          var newSize = calcBoxSize(actual);\n          updateCamera(newSize);\n          dimensions.current = {\n            size: newSize\n          };\n          gl.setSize(newSize.width, newSize.height);\n          gl.setPixelRatio(requestedDpr);\n        }, 50);\n      }\n    });\n    return function () {\n      removeProjectionUpdateListener();\n      removeLayoutMeasureListener();\n      removeAnimationCompleteListener();\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  useLayoutEffect(function () {\n    var cam = layoutCamera.current;\n\n    if (makeDefault && cam) {\n      var oldCam_1 = camera;\n      set(function () {\n        return {\n          camera: cam\n        };\n      });\n      return function () {\n        return set(function () {\n          return {\n            camera: oldCam_1\n          };\n        });\n      };\n    }\n  }, [camera, layoutCamera, makeDefault, set]);\n  return {\n    size: size,\n    camera: camera,\n    cameraRef: layoutCamera\n  };\n}\n\nexport { useLayoutCamera };","map":{"version":3,"names":["useContext","useRef","useLayoutEffect","useThree","useVisualElementContext","calcLength","MotionCanvasContext","invariant","clamp","calcBoxSize","_a","x","y","width","height","useLayoutCamera","updateCamera","_b","makeDefault","context","Boolean","_c","dimensions","layoutCamera","requestedDpr","advance","three","set","camera","size","gl","parentVisualElement","measuredLayoutSize","current","performance","now","projection","removeProjectionUpdateListener","addEventListener","newProjection","removeLayoutMeasureListener","newLayout","newSize","dpr","xScale","yScale","maxScale","Math","max","setSize","setPixelRatio","removeAnimationCompleteListener","actual","layout","setTimeout","cam","oldCam_1","cameraRef"],"sources":["/Users/codenation/Documents/GitHub/portfolio/frontend/node_modules/framer-motion-3d/dist/es/components/use-layout-camera.mjs"],"sourcesContent":["import { useContext, useRef, useLayoutEffect } from 'react';\nimport { useThree } from '@react-three/fiber';\nimport { useVisualElementContext, calcLength } from 'framer-motion';\nimport { MotionCanvasContext } from './MotionCanvasContext.mjs';\nimport { invariant } from 'hey-listen';\nimport { clamp } from 'popmotion';\n\nvar calcBoxSize = function (_a) {\n    var x = _a.x, y = _a.y;\n    return ({\n        width: calcLength(x),\n        height: calcLength(y),\n    });\n};\nfunction useLayoutCamera(_a, updateCamera) {\n    var _b = _a.makeDefault, makeDefault = _b === void 0 ? true : _b;\n    var context = useContext(MotionCanvasContext);\n    invariant(Boolean(context), \"No MotionCanvas detected. Replace Canvas from @react-three/fiber with MotionCanvas from framer-motion.\");\n    var _c = context, dimensions = _c.dimensions, layoutCamera = _c.layoutCamera, requestedDpr = _c.requestedDpr;\n    var advance = useThree(function (three) { return three.advance; });\n    var set = useThree(function (three) { return three.set; });\n    var camera = useThree(function (three) { return three.camera; });\n    var size = useThree(function (three) { return three.size; });\n    var gl = useThree(function (three) { return three.gl; });\n    var parentVisualElement = useVisualElementContext();\n    var measuredLayoutSize = useRef();\n    useLayoutEffect(function () {\n        measuredLayoutSize.current = size;\n        updateCamera(size);\n        advance(performance.now());\n        var projection = parentVisualElement === null || parentVisualElement === void 0 ? void 0 : parentVisualElement.projection;\n        if (!projection)\n            return;\n        /**\n         * When the projection of an element changes we want to update the camera\n         * with the projected dimensions.\n         */\n        var removeProjectionUpdateListener = projection.addEventListener(\"projectionUpdate\", function (newProjection) { return updateCamera(calcBoxSize(newProjection)); });\n        /**\n         * When the layout of an element changes we want to update the renderer\n         * output to match the layout dimensions.\n         */\n        var removeLayoutMeasureListener = projection.addEventListener(\"measure\", function (newLayout) {\n            var newSize = calcBoxSize(newLayout);\n            var dpr = requestedDpr;\n            var _a = dimensions.current.size, width = _a.width, height = _a.height;\n            var xScale = width / newSize.width;\n            var yScale = height / newSize.height;\n            var maxScale = Math.max(xScale, yScale);\n            dpr = clamp(0.75, 4, maxScale);\n            dimensions.current = {\n                size: { width: newSize.width, height: newSize.height },\n                dpr: dpr,\n            };\n            gl.setSize(newSize.width, newSize.height);\n            gl.setPixelRatio(dpr);\n        });\n        /**\n         * When a projection animation completes we want to update the camera to\n         * match the recorded layout of the element.\n         */\n        var removeAnimationCompleteListener = projection.addEventListener(\"animationComplete\", function () {\n            var actual = (projection.layout || {}).actual;\n            if (actual) {\n                setTimeout(function () {\n                    var newSize = calcBoxSize(actual);\n                    updateCamera(newSize);\n                    dimensions.current = { size: newSize };\n                    gl.setSize(newSize.width, newSize.height);\n                    gl.setPixelRatio(requestedDpr);\n                }, 50);\n            }\n        });\n        return function () {\n            removeProjectionUpdateListener();\n            removeLayoutMeasureListener();\n            removeAnimationCompleteListener();\n        };\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n    useLayoutEffect(function () {\n        var cam = layoutCamera.current;\n        if (makeDefault && cam) {\n            var oldCam_1 = camera;\n            set(function () { return ({ camera: cam }); });\n            return function () { return set(function () { return ({ camera: oldCam_1 }); }); };\n        }\n    }, [camera, layoutCamera, makeDefault, set]);\n    return { size: size, camera: camera, cameraRef: layoutCamera };\n}\n\nexport { useLayoutCamera };\n"],"mappings":"AAAA,SAASA,UAAT,EAAqBC,MAArB,EAA6BC,eAA7B,QAAoD,OAApD;AACA,SAASC,QAAT,QAAyB,oBAAzB;AACA,SAASC,uBAAT,EAAkCC,UAAlC,QAAoD,eAApD;AACA,SAASC,mBAAT,QAAoC,2BAApC;AACA,SAASC,SAAT,QAA0B,YAA1B;AACA,SAASC,KAAT,QAAsB,WAAtB;;AAEA,IAAIC,WAAW,GAAG,UAAUC,EAAV,EAAc;EAC5B,IAAIC,CAAC,GAAGD,EAAE,CAACC,CAAX;EAAA,IAAcC,CAAC,GAAGF,EAAE,CAACE,CAArB;EACA,OAAQ;IACJC,KAAK,EAAER,UAAU,CAACM,CAAD,CADb;IAEJG,MAAM,EAAET,UAAU,CAACO,CAAD;EAFd,CAAR;AAIH,CAND;;AAOA,SAASG,eAAT,CAAyBL,EAAzB,EAA6BM,YAA7B,EAA2C;EACvC,IAAIC,EAAE,GAAGP,EAAE,CAACQ,WAAZ;EAAA,IAAyBA,WAAW,GAAGD,EAAE,KAAK,KAAK,CAAZ,GAAgB,IAAhB,GAAuBA,EAA9D;EACA,IAAIE,OAAO,GAAGnB,UAAU,CAACM,mBAAD,CAAxB;EACAC,SAAS,CAACa,OAAO,CAACD,OAAD,CAAR,EAAmB,wGAAnB,CAAT;EACA,IAAIE,EAAE,GAAGF,OAAT;EAAA,IAAkBG,UAAU,GAAGD,EAAE,CAACC,UAAlC;EAAA,IAA8CC,YAAY,GAAGF,EAAE,CAACE,YAAhE;EAAA,IAA8EC,YAAY,GAAGH,EAAE,CAACG,YAAhG;EACA,IAAIC,OAAO,GAAGtB,QAAQ,CAAC,UAAUuB,KAAV,EAAiB;IAAE,OAAOA,KAAK,CAACD,OAAb;EAAuB,CAA3C,CAAtB;EACA,IAAIE,GAAG,GAAGxB,QAAQ,CAAC,UAAUuB,KAAV,EAAiB;IAAE,OAAOA,KAAK,CAACC,GAAb;EAAmB,CAAvC,CAAlB;EACA,IAAIC,MAAM,GAAGzB,QAAQ,CAAC,UAAUuB,KAAV,EAAiB;IAAE,OAAOA,KAAK,CAACE,MAAb;EAAsB,CAA1C,CAArB;EACA,IAAIC,IAAI,GAAG1B,QAAQ,CAAC,UAAUuB,KAAV,EAAiB;IAAE,OAAOA,KAAK,CAACG,IAAb;EAAoB,CAAxC,CAAnB;EACA,IAAIC,EAAE,GAAG3B,QAAQ,CAAC,UAAUuB,KAAV,EAAiB;IAAE,OAAOA,KAAK,CAACI,EAAb;EAAkB,CAAtC,CAAjB;EACA,IAAIC,mBAAmB,GAAG3B,uBAAuB,EAAjD;EACA,IAAI4B,kBAAkB,GAAG/B,MAAM,EAA/B;EACAC,eAAe,CAAC,YAAY;IACxB8B,kBAAkB,CAACC,OAAnB,GAA6BJ,IAA7B;IACAb,YAAY,CAACa,IAAD,CAAZ;IACAJ,OAAO,CAACS,WAAW,CAACC,GAAZ,EAAD,CAAP;IACA,IAAIC,UAAU,GAAGL,mBAAmB,KAAK,IAAxB,IAAgCA,mBAAmB,KAAK,KAAK,CAA7D,GAAiE,KAAK,CAAtE,GAA0EA,mBAAmB,CAACK,UAA/G;IACA,IAAI,CAACA,UAAL,EACI;IACJ;AACR;AACA;AACA;;IACQ,IAAIC,8BAA8B,GAAGD,UAAU,CAACE,gBAAX,CAA4B,kBAA5B,EAAgD,UAAUC,aAAV,EAAyB;MAAE,OAAOvB,YAAY,CAACP,WAAW,CAAC8B,aAAD,CAAZ,CAAnB;IAAkD,CAA7H,CAArC;IACA;AACR;AACA;AACA;;IACQ,IAAIC,2BAA2B,GAAGJ,UAAU,CAACE,gBAAX,CAA4B,SAA5B,EAAuC,UAAUG,SAAV,EAAqB;MAC1F,IAAIC,OAAO,GAAGjC,WAAW,CAACgC,SAAD,CAAzB;MACA,IAAIE,GAAG,GAAGnB,YAAV;MACA,IAAId,EAAE,GAAGY,UAAU,CAACW,OAAX,CAAmBJ,IAA5B;MAAA,IAAkChB,KAAK,GAAGH,EAAE,CAACG,KAA7C;MAAA,IAAoDC,MAAM,GAAGJ,EAAE,CAACI,MAAhE;MACA,IAAI8B,MAAM,GAAG/B,KAAK,GAAG6B,OAAO,CAAC7B,KAA7B;MACA,IAAIgC,MAAM,GAAG/B,MAAM,GAAG4B,OAAO,CAAC5B,MAA9B;MACA,IAAIgC,QAAQ,GAAGC,IAAI,CAACC,GAAL,CAASJ,MAAT,EAAiBC,MAAjB,CAAf;MACAF,GAAG,GAAGnC,KAAK,CAAC,IAAD,EAAO,CAAP,EAAUsC,QAAV,CAAX;MACAxB,UAAU,CAACW,OAAX,GAAqB;QACjBJ,IAAI,EAAE;UAAEhB,KAAK,EAAE6B,OAAO,CAAC7B,KAAjB;UAAwBC,MAAM,EAAE4B,OAAO,CAAC5B;QAAxC,CADW;QAEjB6B,GAAG,EAAEA;MAFY,CAArB;MAIAb,EAAE,CAACmB,OAAH,CAAWP,OAAO,CAAC7B,KAAnB,EAA0B6B,OAAO,CAAC5B,MAAlC;MACAgB,EAAE,CAACoB,aAAH,CAAiBP,GAAjB;IACH,CAdiC,CAAlC;IAeA;AACR;AACA;AACA;;IACQ,IAAIQ,+BAA+B,GAAGf,UAAU,CAACE,gBAAX,CAA4B,mBAA5B,EAAiD,YAAY;MAC/F,IAAIc,MAAM,GAAG,CAAChB,UAAU,CAACiB,MAAX,IAAqB,EAAtB,EAA0BD,MAAvC;;MACA,IAAIA,MAAJ,EAAY;QACRE,UAAU,CAAC,YAAY;UACnB,IAAIZ,OAAO,GAAGjC,WAAW,CAAC2C,MAAD,CAAzB;UACApC,YAAY,CAAC0B,OAAD,CAAZ;UACApB,UAAU,CAACW,OAAX,GAAqB;YAAEJ,IAAI,EAAEa;UAAR,CAArB;UACAZ,EAAE,CAACmB,OAAH,CAAWP,OAAO,CAAC7B,KAAnB,EAA0B6B,OAAO,CAAC5B,MAAlC;UACAgB,EAAE,CAACoB,aAAH,CAAiB1B,YAAjB;QACH,CANS,EAMP,EANO,CAAV;MAOH;IACJ,CAXqC,CAAtC;IAYA,OAAO,YAAY;MACfa,8BAA8B;MAC9BG,2BAA2B;MAC3BW,+BAA+B;IAClC,CAJD,CA/CwB,CAoDxB;EACH,CArDc,EAqDZ,EArDY,CAAf;EAsDAjD,eAAe,CAAC,YAAY;IACxB,IAAIqD,GAAG,GAAGhC,YAAY,CAACU,OAAvB;;IACA,IAAIf,WAAW,IAAIqC,GAAnB,EAAwB;MACpB,IAAIC,QAAQ,GAAG5B,MAAf;MACAD,GAAG,CAAC,YAAY;QAAE,OAAQ;UAAEC,MAAM,EAAE2B;QAAV,CAAR;MAA2B,CAA1C,CAAH;MACA,OAAO,YAAY;QAAE,OAAO5B,GAAG,CAAC,YAAY;UAAE,OAAQ;YAAEC,MAAM,EAAE4B;UAAV,CAAR;QAAgC,CAA/C,CAAV;MAA6D,CAAlF;IACH;EACJ,CAPc,EAOZ,CAAC5B,MAAD,EAASL,YAAT,EAAuBL,WAAvB,EAAoCS,GAApC,CAPY,CAAf;EAQA,OAAO;IAAEE,IAAI,EAAEA,IAAR;IAAcD,MAAM,EAAEA,MAAtB;IAA8B6B,SAAS,EAAElC;EAAzC,CAAP;AACH;;AAED,SAASR,eAAT"},"metadata":{},"sourceType":"module"}